<div class="container">
  <!-- Attack Phase -->
  <div class="redrawPanel attackPanel" *ngIf="attackStarted">
    <div class="relativeRedrawPanel">
      <div
        class="panelBackground"
        [ngClass]="{
          fade: attackEnding,
          fadeHide: !attackStarted
        }"
        [@fadeEnter]="{
          value: '',
          params: { duration: 500, delay: 0, translate: '300px' }
        }"
      ></div>

      <div class="middleRightBox specialAttacKBoxPlayer2">
        <div
          class="middleCard middleRightCard middleLeftCard specialAttacKBoxPlayerCard2"
          [@fadeRightEnter]="{
            value: '',
            params: { duration: 800, delay: 0, translate: '200px' }
          }"
          [@fadeRightLeave]
          [ngClass]="{
            fade: attackEnding,
            fadeHide: !attackStarted,
            zoomOutDarken: enemyWinner,
            zoomIn: enemyLoser
          }"
        >
          <!-- Start of animations -->
          <div
            class="playerResultText redrawDetailText"
            [@zoomInEnter]="{
              value: '',
              params: {
                duration: 400,
                delay: enemyWinner ? 400 : 2000,
                translate: '100px'
              }
            }"
            [@fadeUpLeave]
            *ngIf="enemyWinner || playerWinner || tie"
            [ngClass]="{
              successText: enemyWinner,
              failText: enemyLoser,
              tieText: tie
            }"
          >
            {{
              enemyWinner ? "Winner!" : tie ? "Tie" : "-" + selectedCards.length
            }}
          </div>
          <div
            class="redrawDetailTextInvisible"
            *ngIf="!playerWinner && !playerLoser && !tie"
          >
            .
          </div>
          <!-- End of animations -->
          <div
            class="cardBorder middleCardBorder playerCardBorder"
            [ngClass]="{
              deadEnemy: findEnemyPlayer().health < 1
            }"
          >
            <!-- Start of animations -->
            <div class="cardPlayerBorder">
              <img src="./assets/greenBorder.png" class="cardIcon" />
              <img
                src="./assets/confetti.gif"
                class="cardIcon confetti"
                *ngIf="enemyWinner"
                [@fadeDownEnter]="{
                  value: '',
                  params: { duration: 500, delay: 100, translate: '300px' }
                }"
                [@fadeDownLeave]
              />
              <div class="cardIcon darkenCard"></div>
              <img
                src="./assets/claws.png"
                class="cardIcon confetti claws"
                *ngIf="enemyLoser"
                [@fadeEnter]="{
                  value: '',
                  params: { duration: 500, delay: 2000, translate: '300px' }
                }"
                [@fadeOutLeave]
              />
            </div>
            <!-- End of animations -->
            <div class="cardFooterIconBox swordBox">
              <img src="./assets/sword.png" class="cardIcon" />
              <div class="cardIconValue">
                <div class="attackDefenseText swordText">
                  {{ findEnemyPlayer().attack }}
                </div>
              </div>
            </div>
            <div class="cardFooterIconBox heartBox">
              <img src="./assets/heart.png" class="cardIcon" />
              <div class="cardIconValue">
                <div
                  class="attackDefenseText"
                  [ngClass]="{
                    redHealthText:
                      findEnemyPlayer().health < findEnemyPlayer().baseHealth
                  }"
                >
                  {{ findEnemyPlayer().health }}
                </div>
              </div>
            </div>
            <img
              [src]="findEnemyPlayer().image"
              class="cardBackgroundImage playerBackground"
            />
          </div>
        </div>
      </div>

      <div class="middleRightBox specialAttacKBoxPlayer">
        <div
          class="middleCard middleRightCard middleLeftCard specialAttacKBoxPlayerCard"
          [@fadeLeftEnter]="{
            value: '',
            params: { duration: 800, delay: 100, translate: '200px' }
          }"
          [@fadeLeftLeave]
          [ngClass]="{
            fade: attackEnding,
            fadeHide: !attackStarted,
            zoomOutDarken: playerWinner,
            zoomIn: playerLoser
          }"
        >
          <!-- Start of animations -->
          <div
            class="playerResultText redrawDetailText"
            [@zoomInEnter]="{
              value: '',
              params: {
                duration: 400,
                delay: playerWinner ? 400 : 2000,
                translate: '100px'
              }
            }"
            [@fadeUpLeave]
            *ngIf="enemyWinner || playerWinner || tie"
            [ngClass]="{
              successText: playerWinner,
              failText: playerLoser,
              tieText: tie
            }"
          >
            {{
              playerWinner ? "Winner!" : tie ? "Tie" : "-" + enemyDefense.length
            }}
          </div>
          <div
            class="redrawDetailTextInvisible"
            *ngIf="!playerWinner && !playerLoser && !tie"
          >
            .
          </div>
          <!-- End of animations -->
          <div
            class="cardBorder middleCardBorder playerCardBorder"
            [ngClass]="{
              deadEnemy: player.health < 1
            }"
          >
            <!-- Start of animations -->
            <div class="cardPlayerBorder">
              <img src="./assets/greenBorder.png" class="cardIcon" />
              <img
                src="./assets/confetti.gif"
                class="cardIcon confetti"
                *ngIf="playerWinner"
                [@fadeDownEnter]="{
                  value: '',
                  params: { duration: 500, delay: 100, translate: '300px' }
                }"
                [@fadeDownLeave]
              />
              <img
                src="./assets/claws.png"
                class="cardIcon confetti claws"
                *ngIf="playerLoser"
                [@fadeEnter]="{
                  value: '',
                  params: { duration: 500, delay: 2000, translate: '300px' }
                }"
                [@fadeOutLeave]
              />
            </div>
            <!-- End of animations -->
            <div class="cardFooterIconBox swordBox">
              <img src="./assets/sword.png" class="cardIcon" />
              <div class="cardIconValue">
                <div class="attackDefenseText swordText">
                  {{ player.attack }}
                </div>
              </div>
            </div>
            <div class="cardFooterIconBox heartBox">
              <img src="./assets/heart.png" class="cardIcon" />
              <div class="cardIconValue">
                <div
                  class="attackDefenseText"
                  [ngClass]="{
                    redHealthText: player.health < player.baseHealth
                  }"
                >
                  {{ player.health }}
                </div>
              </div>
            </div>
            <img
              [src]="player.image"
              class="cardBackgroundImage playerBackground"
            />
          </div>
        </div>
      </div>

      <div
        class="attackContainer"
        [ngClass]="{
          fade: attackEnding,
          fadeHide: !attackStarted
        }"
      >
        <div class="topAttackContainer">
          <div
            class="redrawDetailTextInvisible"
            *ngIf="(enemyAttackHand?.name ?? '').length < 1"
          >
            .
          </div>
          <div
            class="redrawDetailText"
            [@zoomInEnter]="{
              value: '',
              params: { duration: 400, delay: 1000, translate: '30px' }
            }"
            [@fadeUpLeave]
            *ngIf="(enemyAttackHand?.name ?? '').length > 1"
          >
            {{ enemyAttackHand?.name }}
          </div>
          <div class="attackCardFlexRow">
            <div
              *ngFor="let card of enemyDefense; index as i"
              class="attackCardBox"
              [@fadeDownEnter]="{
                value: '',
                params: { duration: 500, delay: 500, translate: '30px' }
              }"
              [@fadeDownLeave]
            >
              <div class="attackCard">
                <div class="cardBorder">
                  <img
                    [src]="'./assets/cards/' + card.image"
                    class="cardBackgroundImage"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bottomAttackContainer">
          <div
            class="redrawDetailTextInvisible"
            *ngIf="(playerAttackHand?.name ?? '').length < 1"
          >
            .
          </div>
          <div
            class="redrawDetailText"
            [@zoomInEnter]="{
              value: '',
              params: { duration: 400, delay: 1000, translate: '30px' }
            }"
            [@fadeUpLeave]
            *ngIf="(playerAttackHand?.name ?? '').length > 1"
          >
            {{ playerAttackHand?.name }}
          </div>
          <div class="attackCardFlexRow">
            <div
              *ngFor="let card of selectedCards; index as i"
              class="attackCardBox"
              [@fadeUpEnter]="{
                value: '',
                params: { duration: 500, delay: 500, translate: '300px' }
              }"
              [@fadeUpLeave]
            >
              <div class="attackCard">
                <div class="cardBorder">
                  <img
                    [src]="'./assets/cards/' + card.image"
                    class="cardBackgroundImage"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Attack Phase Bot turn -->
  <div class="redrawPanel attackPanel" *ngIf="enemyAttackStarted">
    <div class="relativeRedrawPanel">
      <div
        class="panelBackground"
        [ngClass]="{
          fade: attackEnding,
          fadeHide: !enemyAttackStarted
        }"
        [@fadeEnter]="{
          value: '',
          params: { duration: 500, delay: 0, translate: '300px' }
        }"
      >
        <div class="middleRightBox specialAttacKBoxPlayer2">
          <div
            class="middleCard middleRightCard middleLeftCard specialAttacKBoxPlayerCard2"
            [@fadeRightEnter]="{
              value: '',
              params: { duration: 800, delay: 0, translate: '200px' }
            }"
            [@fadeRightLeave]
            [ngClass]="{
              fade: attackEnding,
              fadeHide: !enemyAttackStarted,
              zoomOutDarken: enemyWinner,
              zoomIn: enemyLoser
            }"
          >
            <!-- Start of animations -->
            <div
              class="playerResultText redrawDetailText"
              [@zoomInEnter]="{
                value: '',
                params: {
                  duration: 400,
                  delay: enemyWinner ? 400 : 2000,
                  translate: '100px'
                }
              }"
              [@fadeUpLeave]
              *ngIf="enemyWinner || playerWinner || tie"
              [ngClass]="{
                successText: enemyWinner,
                failText: enemyLoser,
                tieText: tie
              }"
            >
              {{
                enemyWinner
                  ? "Winner!"
                  : tie
                  ? "Tie"
                  : "-" + selectedCards.length
              }}
            </div>
            <div
              class="redrawDetailTextInvisible"
              *ngIf="!playerWinner && !playerLoser && !tie"
            >
              .
            </div>
            <!-- End of animations -->
            <div
              class="cardBorder middleCardBorder playerCardBorder"
              [ngClass]="{
                deadEnemy: findEnemyPlayerAttack().health < 1
              }"
            >
              <!-- Start of animations -->
              <div class="cardPlayerBorder">
                <img src="./assets/greenBorder.png" class="cardIcon" />
                <img
                  src="./assets/confetti.gif"
                  class="cardIcon confetti"
                  *ngIf="enemyWinner"
                  [@fadeDownEnter]="{
                    value: '',
                    params: { duration: 500, delay: 100, translate: '300px' }
                  }"
                  [@fadeDownLeave]
                />
                <div class="cardIcon darkenCard"></div>
                <img
                  src="./assets/claws.png"
                  class="cardIcon confetti claws"
                  *ngIf="enemyLoser"
                  [@fadeEnter]="{
                    value: '',
                    params: { duration: 500, delay: 2000, translate: '300px' }
                  }"
                  [@fadeOutLeave]
                />
              </div>
              <!-- End of animations -->
              <div class="cardFooterIconBox swordBox">
                <img src="./assets/sword.png" class="cardIcon" />
                <div class="cardIconValue">
                  <div class="attackDefenseText swordText">
                    {{ findEnemyPlayerAttack().attack }}
                  </div>
                </div>
              </div>
              <div class="cardFooterIconBox heartBox">
                <img src="./assets/heart.png" class="cardIcon" />
                <div class="cardIconValue">
                  <div
                    class="attackDefenseText"
                    [ngClass]="{
                      redHealthText:
                        findEnemyPlayerAttack().health <
                        findEnemyPlayerAttack().baseHealth
                    }"
                  >
                    {{ findEnemyPlayerAttack().health }}
                  </div>
                </div>
              </div>
              <img
                [src]="findEnemyPlayerAttack().image"
                class="cardBackgroundImage playerBackground"
              />
            </div>
          </div>
        </div>

        <div class="middleRightBox specialAttacKBoxPlayer">
          <div
            class="middleCard middleRightCard middleLeftCard specialAttacKBoxPlayerCard"
            [@fadeLeftEnter]="{
              value: '',
              params: { duration: 800, delay: 100, translate: '200px' }
            }"
            [@fadeLeftLeave]
            [ngClass]="{
              fade: attackEnding,
              fadeHide: !enemyAttackStarted,
              zoomOutDarken: playerWinner,
              zoomIn: playerLoser
            }"
          >
            <!-- Start of animations -->
            <div
              class="playerResultText redrawDetailText"
              [@zoomInEnter]="{
                value: '',
                params: {
                  duration: 400,
                  delay: playerWinner ? 400 : 2000,
                  translate: '100px'
                }
              }"
              [@fadeUpLeave]
              *ngIf="enemyWinner || playerWinner || tie"
              [ngClass]="{
                successText: playerWinner,
                failText: playerLoser,
                tieText: tie
              }"
            >
              {{
                playerWinner
                  ? "Winner!"
                  : tie
                  ? "Tie"
                  : "-" + enemyDefense.length
              }}
            </div>
            <div
              class="redrawDetailTextInvisible"
              *ngIf="!playerWinner && !playerLoser && !tie"
            >
              .
            </div>
            <!-- End of animations -->
            <div
              class="cardBorder middleCardBorder playerCardBorder"
              [ngClass]="{
                deadEnemy: player.health < 1
              }"
            >
              <!-- Start of animations -->
              <div class="cardPlayerBorder">
                <img src="./assets/greenBorder.png" class="cardIcon" />
                <img
                  src="./assets/confetti.gif"
                  class="cardIcon confetti"
                  *ngIf="playerWinner"
                  [@fadeDownEnter]="{
                    value: '',
                    params: { duration: 500, delay: 100, translate: '300px' }
                  }"
                  [@fadeDownLeave]
                />
                <img
                  src="./assets/claws.png"
                  class="cardIcon confetti claws"
                  *ngIf="playerLoser"
                  [@fadeEnter]="{
                    value: '',
                    params: { duration: 500, delay: 2000, translate: '300px' }
                  }"
                  [@fadeOutLeave]
                />
              </div>
              <!-- End of animations -->
              <div class="cardFooterIconBox swordBox">
                <img src="./assets/sword.png" class="cardIcon" />
                <div class="cardIconValue">
                  <div class="attackDefenseText swordText">
                    {{ player.attack }}
                  </div>
                </div>
              </div>
              <div class="cardFooterIconBox heartBox">
                <img src="./assets/heart.png" class="cardIcon" />
                <div class="cardIconValue">
                  <div
                    class="attackDefenseText"
                    [ngClass]="{
                      redHealthText: player.health < player.baseHealth
                    }"
                  >
                    {{ player.health }}
                  </div>
                </div>
              </div>
              <img
                [src]="player.image"
                class="cardBackgroundImage playerBackground"
              />
            </div>
          </div>
        </div>

        <div class="defendBtnContainer">
          <div
            class="goButton"
            (click)="chooseDefensePlayerCards()"
            *ngIf="canSelectCards"
          >
            Defend
          </div>
        </div>
      </div>
      <div
        class="attackContainer"
        [ngClass]="{
          fade: attackEnding,
          fadeHide: !enemyAttackStarted
        }"
      >
        <div class="topAttackContainer">
          <div
            class="redrawDetailTextInvisible"
            *ngIf="(enemyAttackHand?.name ?? '').length < 1"
          >
            .
          </div>
          <div
            class="redrawDetailText"
            [@zoomInEnter]="{
              value: '',
              params: { duration: 400, delay: 100, translate: '30px' }
            }"
            [@fadeUpLeave]
            *ngIf="(enemyAttackHand?.name ?? '').length > 1"
          >
            {{ enemyAttackHand?.name }}
          </div>
          <div class="attackCardFlexRow" #enemyAttackCardsRef>
            <div
              *ngFor="let card of enemyDefense; index as i"
              class="attackCardBox"
              [@fadeUpEnter]="{
                value: '',
                params: { duration: 400, delay: 400, translate: '30px' }
              }"
              [@fadeUpLeave]
            >
              <div class="attackCard">
                <div class="cardBorder">
                  <img
                    [src]="'./assets/cards/' + card.image"
                    class="cardBackgroundImage"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="bottomAttackContainer"
          *ngIf="finishedChoosingDefensePlayer"
        >
          <div
            class="redrawDetailTextInvisible"
            *ngIf="(playerAttackHand?.name ?? '').length < 1"
          >
            .
          </div>
          <div
            class="redrawDetailText"
            [@zoomInEnter]="{
              value: '',
              params: { duration: 400, delay: 500, translate: '30px' }
            }"
            [@fadeUpLeave]
            *ngIf="(playerAttackHand?.name ?? '').length > 1"
          >
            {{ playerAttackHand?.name }}
          </div>
          <div class="attackCardFlexRow" *ngIf="chooseDefensePlayerCards">
            <div
              *ngFor="let card of selectedCards; index as i"
              class="attackCardBox"
              [@fadeUpEnter]="{
                value: '',
                params: { duration: 400, delay: 0, translate: '30px' }
              }"
              [@fadeUpLeave]
            >
              <div class="attackCard">
                <div class="cardBorder">
                  <img
                    [src]="'./assets/cards/' + card.image"
                    class="cardBackgroundImage"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Redraw cards panel -->
  <div class="redrawPanel" *ngIf="!redrawHide">
    <div class="relativeRedrawPanel">
      <div
        class="panelBackground"
        [ngClass]="{
          fade: !redrawing,
          fadeHide: redrawHide
        }"
      ></div>
      <div
        class="redrawBox"
        [ngClass]="{
          fade: !redrawing,
          fadeHide: redrawHide
        }"
      >
        <div class="redrawText">Redraw cards</div>
        <div class="redrawDetailText">
          Can select up to {{ 2 - redrawSelectedCards.length }} more cards to
          redraw
        </div>
      </div>
      <div
        class="redrawCardsContainer"
        [ngClass]="{
          fade: !redrawing,
          fadeHide: redrawHide
        }"
      >
        <div
          *ngFor="let card of redrawCards; index as i"
          class="redrawCardBox"
          [@fadeUpEnter]="{
            value: '',
            params: { duration: 400, delay: (i + 1) * 100, translate: '30px' }
          }"
          [@fadeUpLeave]
        >
          <div
            class="redrawCard"
            [ngClass]="{
              activeRedrawCard: redrawCardIsSelected(card)
            }"
            (click)="selectRedrawCard(card)"
          >
            <div
              class="cardBorder redrawBorder"
              [ngClass]="{
                activeCardBorder: redrawCardIsSelected(card)
              }"
            >
              <img
                [src]="'./assets/cards/' + card.image"
                class="cardBackgroundImage"
              />
              <div class="wildCard" *ngIf="card.wild"></div>
            </div>
          </div>
        </div>
        <div class="goBtnContainer">
          <div class="goButton" (click)="finishedRedraw()">Go!</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating text -->
  <div class="floatingText">
    <div class="floatingRelative" *ngFor="let item of errorList">
      <div
        class="floatingTextMessage"
        [ngClass]="{
          fade: errorListInactive.includes(item.id)
        }"
        [@zoomInEnter]="{
          value: '',
          params: { duration: 1000, delay: 0, translate: '30px' }
        }"
        [@fadeOutLeave]
      >
        {{ item.message }}
      </div>
    </div>
  </div>

  <!-- Player 2 -->
  <div class="top">
    <div
      class="topLeft"
      *ngIf="redrawHide"
      [@fadeDownEnter]="{ value: '', params: { delay: 300 } }"
    >
      <div class="deck deckCard"></div>
      <div class="deck deck1 topdeck1"></div>
      <div class="deck deck2 topdeck2"></div>
      <div class="deck deck3 topdeck3" *ngIf="!canSeeTopCard"></div>
      <div class="deck deckTopImage"></div>
    </div>
    <div
      class="topMiddle"
      *ngIf="(redrawHide && canSelectCards) || (redrawHide && showBotCards)"
    >
      <div
        class="bottomCard topCard"
        *ngFor="let card of enemyHand; index as i"
        [ngClass]="{
          activeEnemyCard: enemyCardIsSelected(card)
        }"
        #activeEnemyCards
        [@fadeUpEnter]="{
          value: '',
          params: { duration: 400, delay: (i + 1) * 100, translate: '30px' }
        }"
        [@fadeUpLeave]
      >
        <div class="cardBorder">
          <img [src]="'./assets/back.png'" class="cardBackgroundImage" />
        </div>
      </div>
    </div>
    <div class="topRight"><div class="decktest"></div></div>
  </div>

  <!-- Middle -->
  <div class="middle" id="testArrow">
    <div class="middleLeft">
      <div
        class="attackButtonBox"
        *ngIf="redrawHide"
        [@fadeEnter]="{
          value: '',
          params: { duration: 400, delay: 1000, translate: '30px' }
        }"
        [@fadeUpLeave]
      >
        <div
          class="attackButton"
          (click)="attack()"
          [ngClass]="{ disabledButton: !canSelectCards }"
        >
          Attack
        </div>
      </div>
      <div class="middleRightBox">
        <div
          class="middleCard middleRightCard middleLeftCard"
          *ngIf="redrawHide"
          [@fadeUpEnter]="{
            value: '',
            params: { duration: 400, delay: 1000, translate: '30px' }
          }"
          [@fadeUpLeave]
          [ngClass]="{
            leavingFieldCard: player.health < 1
          }"
        >
          <div
            class="cardBorder middleCardBorder playerCardBorder"
            [ngClass]="{
              errorEnemyBorder: playerTarget === player.id && !wrappingTurn
            }"
            #playerRef
          >
            <div class="cardPlayerBorder">
              <img src="./assets/greenBorder.png" class="cardIcon" />
            </div>
            <div class="cardFooterIconBox swordBox">
              <img src="./assets/sword.png" class="cardIcon" />
              <div class="cardIconValue">
                <div class="attackDefenseText swordText">
                  {{ player.attack }}
                </div>
              </div>
            </div>
            <div class="cardFooterIconBox heartBox">
              <img src="./assets/heart.png" class="cardIcon" />
              <div class="cardIconValue">
                <div
                  class="attackDefenseText"
                  [ngClass]="{
                    redHealthText: player.health < player.baseHealth
                  }"
                >
                  {{ player.health }}
                </div>
              </div>
            </div>
            <img
              [src]="player.image"
              class="cardBackgroundImage playerBackground"
            />
          </div>
        </div>
      </div>
    </div>
    <div class="middleRight">
      <div class="enemyCardsBox">
        <div
          class="middleRightBox"
          *ngFor="let item of enemyPlayers; index as i; trackBy: trackById"
        >
          <div
            class="middleCard middleRightCard"
            *ngIf="redrawHide"
            [@fadeUpEnter]="{
              value: '',
              params: {
                duration: 400,
                delay: 1000,
                translate: '30px'
              }
            }"
            [@fadeUpLeave]
            [ngClass]="{
              leavingFieldCard: item.health < 1
            }"
            (click)="setEnemyPlayerHoverTarget(item)"
          >
            <div
              class="cardBorder middleCardBorder playerCardBorder"
              [ngClass]="{
                errorEnemyBorder: enemyTarget === item.id && !wrappingTurn
              }"
              #enemyPlayerRef
            >
              <div class="cardPlayerBorder">
                <img src="./assets/greenBorder.png" class="cardIcon" />
              </div>
              <div class="cardFooterIconBox swordBox">
                <img src="./assets/sword.png" class="cardIcon" />
                <div class="cardIconValue">
                  <div class="attackDefenseText swordText">
                    {{ item.attack }}
                  </div>
                </div>
              </div>
              <div class="cardFooterIconBox heartBox">
                <img src="./assets/heart.png" class="cardIcon" />
                <div class="cardIconValue">
                  <div
                    class="attackDefenseText"
                    [ngClass]="{
                      redHealthText: item.health < item.baseHealth
                    }"
                  >
                    {{ item.health }}
                  </div>
                </div>
              </div>
              <img
                [src]="item.image"
                class="cardBackgroundImage playerBackground"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Player 1 -->
  <div class="bottom">
    <div class="bottomLeft">
      <div class="decktest"></div>
    </div>
    <div
      class="bottomMiddle"
      [ngClass]="{
        attackingBottomMiddle:
          !showBotCards && enemyAttackStarted && canSelectCards
      }"
      #myActiveCardsDefending
      *ngIf="
        canSelectCards ||
        (!showBotCards && enemyAttackStarted && canSelectCards)
      "
      [@fadeOutLeave]="{
        value: '',
        params: { duration: 400, delay: 0, translate: '30px' }
      }"
    >
      <div
        class="bottomCard playerBottomCard"
        *ngFor="let card of playerHand; index as i; trackBy: trackById"
        [ngClass]="{
          activeCard: cardIsSelected(card)
        }"
        #myActiveCards
        (click)="selectCard(card)"
        (wheel)="wildCardChange($event, card)"
        [@fadeUpEnter]="{
          value: '',
          params: { duration: 400, delay: (i + 1) * 100, translate: '30px' }
        }"
        [@fadeOutLeave]
      >
        <div
          class="cardBorder"
          [ngClass]="{
            activeCardBorder: cardIsSelected(card),
            validCardBorder: cardIsValid(card),
            errorCardBorder:
              !cardIsValid(card) && cardIsSelected(card) && !enemyAttackStarted
          }"
        >
          <img
            [src]="'./assets/cards/' + card.image"
            class="cardBackgroundImage"
          />
          <div class="wildCard" *ngIf="card.wild"></div>
        </div>
      </div>
    </div>
    <div
      class="bottomRight"
      *ngIf="redrawHide"
      [@fadeUpEnter]="{ value: '', params: { delay: 300 } }"
    >
      <div class="deck deckCard"></div>
      <div class="deck deck1"></div>
      <div class="deck deck2"></div>
      <div class="deck deck3" *ngIf="!canSeeTopCard"></div>
      <div
        [@flipInYonEnter]
        [@fadeDownLeave]
        [ngStyle]="{
          'background-image': 'url(./assets/cards/' + playerDeck[0].image + ')'
        }"
        *ngIf="canSeeTopCard && topRedrawCard === playerDeck[0].id"
        class="deck deckTopImage"
      ></div>
    </div>
  </div>
</div>
